---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post }
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout 
  title={`${post.data.title} - Olimpiade degli Artisti`}
  description={post.data.description || post.data.title}
>
  <section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
    <!-- Breadcrumb -->
    <div class="mb-8">
      <a href="/news" class="text-gray-600 hover:text-gray-900 transition">← Torna alle News</a>
    </div>

    <!-- Header Articolo -->
    <header class="mb-12">
      <h1 class="text-5xl font-serif font-bold text-gray-900 mb-4">{post.data.title}</h1>
      
      <div class="flex flex-wrap gap-4 text-sm text-gray-600">
        <span>
          {post.data.date.toLocaleDateString('it-IT', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
          })}
        </span>
        {post.data.author && (
          <span>di {post.data.author}</span>
        )}
      </div>
    </header>

    <!-- Contenuto -->
    <article class="prose prose-lg max-w-none text-gray-700 mb-16">
      <Content />
    </article>

    <!-- CTA -->
    <div class="bg-gray-50 rounded-lg p-8 text-center">
      <h2 class="text-2xl font-serif font-bold text-gray-900 mb-4">Scopri gli Artisti</h2>
      <p class="text-gray-700 mb-6">Visita la nostra directory e scopri i talenti della comunità.</p>
      <a href="/artisti" class="inline-block bg-gray-900 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-800 transition">
        Esplora gli Artisti
      </a>
    </div>
  </section>
</Layout>
