---
import Layout from "../layouts/Layout.astro";
const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, "");
---

<Layout title="Tecnologie">
    <section
        class="py-32 bg-deepviolet-950 text-white relative overflow-hidden"
    >
        <div class="absolute inset-0 z-0 opacity-20">
            <div
                class="absolute inset-0 bg-gradient-to-b from-deepviolet-950 via-transparent to-deepviolet-950"
            >
            </div>
            <img
                src={`${baseUrl}/images/canvas_texture.png`}
                alt=""
                class="w-full h-full object-cover"
            />
        </div>

        <div class="max-w-7xl mx-auto px-4 relative z-10">
            <div class="text-center mb-24">
                <span
                    class="text-gold-400 font-bold uppercase tracking-[0.4em] text-xs block mb-4"
                    >Innovation & Heritage</span
                >
                <h1 class="text-4xl md:text-7xl font-serif font-bold uppercase">
                    Tecnologia al Servizio <br /><span class="text-gold-500"
                        >dell'Arte</span>
                </h1>
                <p class="mt-8 text-violet-200/60 max-w-2xl mx-auto italic">
                    "L'innovazione non sostituisce il genio umano, lo amplifica
                    e lo protegge."
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- A) Web Moderno -->
                <div class="museum-block p-10 bg-white/5 border-white/10 group">
                    <div class="text-gold-500 mb-6 text-2xl">01</div>
                    <h3
                        class="font-serif font-bold text-xl mb-4 text-white uppercase tracking-wider"
                    >
                        Web Moderno
                    </h3>
                    <p class="text-violet-100/60 text-sm leading-relaxed mb-6">
                        Utilizziamo tecnologie allo stato dell'arte (HTML5,
                        CSS3, JS) per garantire velocit√†, accessibilit√† e una
                        resa visiva degna di una galleria d‚Äôarte internazionale.
                    </p>
                    <span
                        class="px-3 py-1 bg-green-500/20 text-green-400 text-[10px] font-bold uppercase tracking-widest rounded-full"
                        >Attivo</span
                    >
                </div>

                <!-- B) Traduzione Globale -->
                <div class="museum-block p-10 bg-white/5 border-white/10 group">
                    <div class="text-gold-500 mb-6 text-2xl">02</div>
                    <h3
                        class="font-serif font-bold text-xl mb-4 text-white uppercase tracking-wider"
                    >
                        Traduzione Globale
                    </h3>
                    <p class="text-violet-100/60 text-sm leading-relaxed mb-6">
                        Puntiamo a superare le barriere linguistiche con
                        traduzioni simultanee in 115 lingue per dare voce agli
                        artisti in tutto il mondo.
                    </p>
                    <div class="space-y-4">
                        <span
                            class="px-3 py-1 bg-gold-500/20 text-gold-400 text-[10px] font-bold uppercase tracking-widest rounded-full"
                            >Demo Live</span
                        >
                        <div
                            id="translation-demo"
                            class="mt-4 p-4 bg-black/30 rounded border border-white/5"
                        >
                            <p id="trans-text" class="text-sm italic mb-2">
                                "L'intelligenza artificiale incontra
                                l'eccellenza creativa."
                            </p>
                            <div class="flex gap-2">
                                <button
                                    onclick="window.switchLang('it')"
                                    class="flex-1 py-1 text-[10px] font-bold uppercase border border-white/20 hover:bg-white hover:text-deepviolet-950 transition-all"
                                    >IT</button
                                >
                                <button
                                    onclick="window.switchLang('en')"
                                    class="flex-1 py-1 text-[10px] font-bold uppercase border border-white/20 hover:bg-white hover:text-deepviolet-950 transition-all"
                                    >EN</button
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <!-- C) AI Curator -->
                <div class="museum-block p-10 bg-white/5 border-white/10 group">
                    <div class="text-gold-500 mb-6 text-2xl">03</div>
                    <h3
                        class="font-serif font-bold text-xl mb-4 text-white uppercase tracking-wider"
                    >
                        AI Curator
                    </h3>
                    <p class="text-violet-100/60 text-sm leading-relaxed mb-6">
                        Un assistente virtuale che analizza stili e interessi
                        per consigliare opere e artisti in linea con la
                        sensibilit√† di ogni visitatore.
                    </p>
                    <div class="space-y-4">
                        <span
                            class="px-3 py-1 bg-gold-500/20 text-gold-400 text-[10px] font-bold uppercase tracking-widest rounded-full"
                            >Demo AI</span
                        >
                        <button
                            onclick="document.getElementById('ai-modal').showModal()"
                            class="block w-full text-center py-2 text-[10px] font-bold uppercase bg-white text-deepviolet-950 hover:bg-gold-500 transition-all"
                            >Avvia Test Raccomandazione</button
                        >
                    </div>
                </div>

                <!-- D) Voice Interaction -->
                <div class="museum-block p-10 bg-white/5 border-white/10 group">
                    <div class="text-gold-500 mb-6 text-2xl">04</div>
                    <h3
                        class="font-serif font-bold text-xl mb-4 text-white uppercase tracking-wider"
                    >
                        Accesso Vocale
                    </h3>
                    <p class="text-violet-100/60 text-sm leading-relaxed mb-6">
                        Navigazione e ricerca guidate dalla voce (Web Speech
                        API) per garantire la massima accessibilit√† a chiunque.
                    </p>
                    <div class="space-y-4">
                        <span
                            class="px-3 py-1 bg-gold-500/20 text-gold-400 text-[10px] font-bold uppercase tracking-widest rounded-full"
                            >Demo Voce</span
                        >
                        <div id="voice-demo" class="space-y-2">
                            <button
                                id="voice-btn"
                                class="w-full py-2 flex items-center justify-center gap-2 text-[10px] font-bold uppercase border border-white/20 hover:bg-white hover:text-deepviolet-950 transition-all font-bold"
                            >
                                <span id="mic-icon">üé§</span>
                                <span id="voice-status">Attiva Microfono</span>
                            </button>
                            <p
                                id="voice-transcript"
                                class="text-[10px] text-violet-200/40 italic text-center"
                            >
                                Prova a dire: "cerca pittura" o "vai a quote"
                            </p>
                        </div>
                    </div>
                </div>

                <!-- E) Esperienze Immersive -->
                <div class="museum-block p-10 bg-white/5 border-white/10 group">
                    <div class="text-gold-500 mb-6 text-2xl">05</div>
                    <h3
                        class="font-serif font-bold text-xl mb-4 text-white uppercase tracking-wider"
                    >
                        AR/VR Gallery
                    </h3>
                    <p class="text-violet-100/60 text-sm leading-relaxed mb-6">
                        Visione 3D e tour virtuali in Realt√† Aumentata per
                        immergersi completamente nel mondo dell'artista da
                        qualsiasi dispositivo.
                    </p>
                    <div class="space-y-4">
                        <span
                            class="px-3 py-1 bg-blue-500/20 text-blue-400 text-[10px] font-bold uppercase tracking-widest rounded-full"
                            >Roadmap</span
                        >
                        <a
                            href={`${baseUrl}/esperienze-immersive`}
                            class="block w-full text-center py-2 text-[10px] font-bold uppercase border border-gold-400 text-gold-400 hover:bg-gold-400 hover:text-deepviolet-950 transition-all"
                            >Esplora Demo 3D</a
                        >
                    </div>
                </div>

                <!-- Roadmap Block -->
                <div
                    class="museum-block p-10 bg-gold-500 text-deepviolet-950 flex flex-col justify-center text-center"
                >
                    <h3 class="font-serif font-bold text-xl mb-4 uppercase">
                        Sviluppo Futuro
                    </h3>
                    <p
                        class="text-xs font-bold uppercase tracking-widest leading-tight mb-8"
                    >
                        Architettura a Microservizi & Cloud Scalabile
                    </p>
                    <a
                        href={`${baseUrl}/architettura`}
                        class="inline-block py-3 px-6 bg-deepviolet-950 text-white font-bold uppercase tracking-widest text-[10px] hover:scale-105 transition-all"
                        >Vedi Roadmap Tecnica</a
                    >
                </div>
            </div>
        </div>
    </section>

    <!-- Modal AI AI Recommendation -->
    <dialog
        id="ai-modal"
        class="p-8 bg-white max-w-2xl w-full border-4 border-deepviolet-950 rounded-none shadow-2xl backdrop:bg-deepviolet-950/80"
    >
        <div class="space-y-8">
            <div class="text-center">
                <h3
                    class="font-serif font-bold text-2xl text-deepviolet-950 uppercase mb-2"
                >
                    AI Recommendation Test
                </h3>
                <p
                    class="text-gray-400 text-xs uppercase tracking-widest font-bold"
                >
                    Seleziona 3 temi che ti appassionano
                </p>
            </div>

            <div id="ai-tags" class="flex flex-wrap gap-2 justify-center">
                {
                    [
                        "astratto",
                        "classico",
                        "moderno",
                        "luce",
                        "colore",
                        "minimal",
                        "natura",
                        "tecnologia",
                        "marmo",
                        "architettura",
                    ].map((tag) => (
                        <button
                            class="ai-tag px-4 py-2 border border-violet-100 text-xs uppercase font-bold text-deepviolet-900 hover:bg-violet-50 transition-all"
                            data-tag={tag}
                        >
                            {tag}
                        </button>
                    ))
                }
            </div>

            <div id="ai-results" class="hidden space-y-6">
                <div class="h-px bg-violet-100"></div>
                <p
                    class="text-[10px] font-bold uppercase text-gold-600 text-center tracking-widest"
                >
                    Opere raccomandate per te
                </p>
                <div id="ai-cards" class="grid grid-cols-2 gap-4">
                    <!-- Opere generate via JS -->
                </div>
            </div>

            <div class="flex justify-end gap-4 mt-8">
                <button
                    onclick="document.getElementById('ai-modal').close()"
                    class="text-[10px] font-bold uppercase text-gray-400 hover:text-deepviolet-950 px-4"
                    >Chiudi</button
                >
                <button
                    id="ai-run-btn"
                    class="px-8 py-3 bg-deepviolet-950 text-white text-[10px] font-bold uppercase tracking-widest"
                    >Genera Raccomandazione</button
                >
            </div>
        </div>
    </dialog>

    <script is:inline>
        // 1. Logica Traduzione
        const dictionaries = {
            it: {
                title: "L'intelligenza artificiale incontra l'eccellenza creativa.",
            },
            en: { title: "Artificial intelligence meets creative excellence." },
        };
        window.switchLang = (lang) => {
            const el = document.getElementById("trans-text");
            if (el) el.textContent = `"${dictionaries[lang].title}"`;
        };

        // 2. Logica AI Recommendation
        let selectedTags = new Set();
        document.querySelectorAll(".ai-tag").forEach((btn) => {
            btn.addEventListener("click", () => {
                const tag = btn.dataset.tag;
                if (selectedTags.has(tag)) {
                    selectedTags.delete(tag);
                    btn.classList.remove("bg-deepviolet-950", "text-white");
                } else if (selectedTags.size < 3) {
                    selectedTags.add(tag);
                    btn.classList.add("bg-deepviolet-950", "text-white");
                }
            });
        });

        document
            .getElementById("ai-run-btn")
            .addEventListener("click", async () => {
                if (selectedTags.size < 1)
                    return alert("Seleziona almeno un tema.");

                const res = await fetch(
                    "/olimpiadeartisti-preview/data/opere.json",
                );
                const opere = await res.json();

                const scores = opere
                    .map((op) => {
                        let score = 0;
                        op.tags.forEach((tag) => {
                            if (selectedTags.has(tag)) score += 10;
                        });
                        return { ...op, score };
                    })
                    .sort((a, b) => b.score - a.score);

                const container = document.getElementById("ai-cards");
                container.innerHTML = scores
                    .slice(0, 4)
                    .map(
                        (op) => `
                <div class="group border border-violet-50 p-2 hover:shadow-lg transition-all">
                    <img src="${op.immagine}" class="w-full h-24 object-cover mb-2" />
                    <h4 class="text-[9px] font-bold uppercase text-deepviolet-950 truncate">${op.titolo}</h4>
                    <p class="text-[8px] text-gray-400 uppercase">${op.artista}</p>
                    <div class="mt-1 flex gap-1">
                        ${op.tags
                            .slice(0, 2)
                            .map(
                                (t) =>
                                    `<span class="text-[6px] px-1 bg-violet-50 text-violet-400 font-bold uppercase">${t}</span>`,
                            )
                            .join("")}
                    </div>
                </div>
            `,
                    )
                    .join("");

                document
                    .getElementById("ai-results")
                    .classList.remove("hidden");
            });

        // 3. Logica Voice Interaction
        const voiceBtn = document.getElementById("voice-btn");
        const voiceStatus = document.getElementById("voice-status");
        const voiceTranscript = document.getElementById("voice-transcript");

        if (
            "webkitSpeechRecognition" in window ||
            "SpeechRecognition" in window
        ) {
            const SpeechRecognition =
                window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = "it-IT";
            recognition.continuous = false;

            voiceBtn.addEventListener("click", () => {
                recognition.start();
                voiceStatus.textContent = "In ascolto...";
                voiceBtn.classList.add("bg-red-500", "text-white");
            });

            recognition.onresult = (event) => {
                const text = event.results[0][0].transcript.toLowerCase();
                voiceTranscript.textContent = `Hai detto: "${text}"`;

                if (text.includes("quote"))
                    window.location.href =
                        "/olimpiadeartisti-preview/quote-pacchetti";
                if (text.includes("iscrizione"))
                    window.location.href =
                        "/olimpiadeartisti-preview/iscrizione";
                if (text.includes("pittura"))
                    window.location.href = "/olimpiadeartisti-preview/artisti";
            };

            recognition.onend = () => {
                voiceStatus.textContent = "Attiva Microfono";
                voiceBtn.classList.remove("bg-red-500", "text-white");
            };
        } else {
            voiceStatus.textContent = "Voce non supportata";
            voiceBtn.disabled = true;
        }
    </script>
</Layout>
